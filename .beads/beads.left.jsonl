{"id":"crystalmath-22s","content_hash":"33556f824177a7f7d72799a46a7c2a8f820f8f21c71391901e380bb690052e3c","title":"Add shellcheck to CI","description":"Run shellcheck on all lib/*.sh and bin/runcrystal. Fix warnings","acceptance_criteria":"- shellcheck passes on all scripts\n- No warnings in lib/ modules\n- Main script clean\n- CI configured if applicable","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-19T20:36:19.327616-06:00","updated_at":"2025-11-19T21:14:28.518209-06:00","closed_at":"2025-11-19T21:14:28.518209-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-22s","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.453955-06:00","created_by":"daemon"}]}
{"id":"crystalmath-3cv","content_hash":"8bd2f7fb2419c1f621a8aa0b44a0b351e4e9a8b70f8b4dec92bf33cc26825ec0","title":"Implement lib/cry-parallel.sh","description":"Parallelism logic and resource allocation. Function: parallel_setup(nprocs, job_state_ref) populates CRY_JOB array with MODE, EXE_PATH, OMP_NUM_THREADS, MPI_RANKS, THREADS_PER_RANK","design":"From gemini: Use name reference to CRY_JOB array. Calculate threads per rank. Export OMP_NUM_THREADS, I_MPI_PIN_DOMAIN, KMP_AFFINITY, OMP_STACKSIZE=256M. Return 0 on success","acceptance_criteria":"- parallel_setup() correctly calculates resources\n- Env vars exported properly\n- CRY_JOB array populated with all required keys\n- Serial and hybrid modes both work","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.813299-06:00","updated_at":"2025-11-19T20:57:48.155031-06:00","closed_at":"2025-11-19T20:57:48.155031-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-3cv","depends_on_id":"crystalmath-a2j","type":"blocks","created_at":"2025-11-19T20:36:49.807568-06:00","created_by":"daemon"},{"issue_id":"crystalmath-3cv","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:49.96926-06:00","created_by":"daemon"},{"issue_id":"crystalmath-3cv","depends_on_id":"crystalmath-rzw","type":"blocks","created_at":"2025-11-19T20:36:50.248531-06:00","created_by":"daemon"},{"issue_id":"crystalmath-3cv","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.478024-06:00","created_by":"daemon"},{"issue_id":"crystalmath-3cv","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.084005-06:00","created_by":"daemon"}]}
{"id":"crystalmath-537","content_hash":"92b6f63f5f3ee8ff90d453f46cdbb836b06e2d9941cbd02e35129a513c617e25","title":"Add --explain/--dry-run educational mode","description":"Implement dry-run mode that shows hardware detection, parallel strategy, Intel optimizations, file staging plan, and execution command WITHOUT running calculation. Educational feature for students learning HPC.","design":"From V2/CrystalRun:136-225. Parse flag before input validation. Build explanation using cry-ui cards showing: 1) Hardware (cores, ranks), 2) Parallel strategy (thread calculation), 3) Intel opts (pinning, affinity, stack), 4) File staging (scratch dir, files to copy), 5) Execution command. Exit after display.","acceptance_criteria":"- --explain flag recognized\n- Shows 5-section breakdown\n- Uses ui_card for formatting\n- Exits without running calculation\n- Matches V2 educational quality","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-19T23:00:47.743062-06:00","updated_at":"2025-11-19T23:55:11.808314-06:00","closed_at":"2025-11-19T23:55:11.808314-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-537","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T23:00:56.778488-06:00","created_by":"daemon"}]}
{"id":"crystalmath-5ab","content_hash":"6e7a625b5d173ee8436f2a6667c3fe22981efe4c7a54e2baafc0e73e6e3e1d45","title":"Add Comprehensive Unit Tests","description":"Test suite for core functionality. Include database CRUD operations, job state transitions, CRYSTALpytools integration, and mock runner tests.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-20T19:20:31.80782-06:00","updated_at":"2025-11-20T19:20:31.80782-06:00","source_repo":".","labels":["mvp","phase-1","testing"]}
{"id":"crystalmath-5nx","content_hash":"6d73ab4cfaf16234e678e2a974d85a1ed8c0696100eb90780785d76935a40538","title":"Move runcrystal to bin/runcrystal","description":"Relocate current monolithic script as reference, create new modular version in bin/","acceptance_criteria":"- Old script saved as runcrystal.monolithic\n- New script in bin/runcrystal\n- bin/runcrystal executable\n- PATH handling correct for lib/ discovery","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.024223-06:00","updated_at":"2025-11-19T21:06:33.40139-06:00","closed_at":"2025-11-19T21:06:33.40139-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-5nx","depends_on_id":"crystalmath-22s","type":"blocks","created_at":"2025-11-19T20:36:50.409227-06:00","created_by":"daemon"},{"issue_id":"crystalmath-5nx","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.234639-06:00","created_by":"daemon"}]}
{"id":"crystalmath-6o9","content_hash":"e1b0249e8f1f223e601f57385acb5e5213405c45f13b22bfeba934d7aa4d89cb","title":"Update CLAUDE.md for refactored architecture","description":"Update CLAUDE.md with new structure, module descriptions, testing instructions","acceptance_criteria":"- CLAUDE.md reflects new architecture\n- Testing instructions included\n- Module responsibilities documented\n- Future maintainer can understand structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-19T20:36:19.398241-06:00","updated_at":"2025-11-19T21:09:14.22883-06:00","closed_at":"2025-11-19T21:09:14.22883-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-6o9","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.504523-06:00","created_by":"daemon"}]}
{"id":"crystalmath-6sp","content_hash":"13e5cce22ed38ac635fab3469d57677dc6edace2066483b98b9889103cc0a526","title":"Implement lib/cry-config.sh","description":"Central configuration module with cry_config_init(), path exports, environment checks. Handles CRY23_ROOT, BIN_DIR, SCRATCH_BASE. Supports env var overrides","design":"From codex: Use : ${VAR:=default} pattern. Export CRY_VERSION, CRY_ARCH, CRY_BIN_DIR. Implement cry_config_get() helper. Support optional cry.conf file","acceptance_criteria":"- cry_config_init() function works\n- All path variables exported correctly\n- Env var overrides functional\n- Module sources without errors","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.665915-06:00","updated_at":"2025-11-19T20:50:45.304565-06:00","closed_at":"2025-11-19T20:50:45.304565-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-ejy","type":"blocks","created_at":"2025-11-19T20:36:49.551905-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-be3","type":"blocks","created_at":"2025-11-19T20:36:49.620586-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-3cv","type":"blocks","created_at":"2025-11-19T20:36:49.669549-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-hyl","type":"blocks","created_at":"2025-11-19T20:36:49.715592-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-ib2","type":"blocks","created_at":"2025-11-19T20:36:49.76152-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:49.877184-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-nim","type":"blocks","created_at":"2025-11-19T20:36:50.155165-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.431332-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6sp","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:06.985439-06:00","created_by":"daemon"}]}
{"id":"crystalmath-6vn","content_hash":"a57437acab47c030f564fed26c728a16fec2e854fa5683c9b5e75fac51579a43","title":"Refactor main bin/runcrystal script","description":"Transform runcrystal into thin orchestrator \u003c100 lines. Implement main() function with module loading, argument parsing, pipeline execution","design":"From gemini: Use trap 'scratch_cleanup' EXIT. Declare -A CRY_JOB for state. Load modules in order: config, logging, core, ui, help, parallel, scratch, stage, exec. Call functions in pipeline. From codex: Implement cry_workflow_entry for orchestration","acceptance_criteria":"- Main script \u003c100 lines\n- All modules loaded correctly\n- trap-based cleanup works\n- Preserves all original functionality\n- Error handling robust","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.989123-06:00","updated_at":"2025-11-20T23:22:37.246987-06:00","closed_at":"2025-11-20T23:22:37.246987-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-6vn","depends_on_id":"crystalmath-5nx","type":"blocks","created_at":"2025-11-19T20:36:50.086025-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6vn","depends_on_id":"crystalmath-z00","type":"blocks","created_at":"2025-11-19T20:36:50.386766-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6vn","depends_on_id":"crystalmath-6o9","type":"blocks","created_at":"2025-11-19T20:36:50.594694-06:00","created_by":"daemon"},{"issue_id":"crystalmath-6vn","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.211255-06:00","created_by":"daemon"}]}
{"id":"crystalmath-7e1","content_hash":"352c4e50cf99a83a689f01d795916609e61df7273c0e3821e93d167d48887314","title":"Write module documentation","description":"Document each lib/ module: purpose, functions, parameters, return codes, usage examples","acceptance_criteria":"- Each module has header documentation\n- Function signatures documented\n- Examples provided\n- References to design decisions","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-19T20:36:19.363784-06:00","updated_at":"2025-11-19T20:36:19.363784-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-7e1","depends_on_id":"crystalmath-ps0","type":"blocks","created_at":"2025-11-19T20:36:50.622011-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7e1","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.478814-06:00","created_by":"daemon"}]}
{"id":"crystalmath-7jf","content_hash":"6168297aecbe71833b6fb7f2c917bcd25858fc84b36c06cbb0b0a973bb0e5655","title":"Set up testing framework (bats)","description":"Install bats-core, create tests/ directory structure, write test harness and mock utilities","design":"From codex: Mock external commands via CRY_CMD_MPIRUN, CRY_CMD_GUM vars. Create tests/mocks/ for fake binaries. Set up tests/helpers.bash for common test functions","acceptance_criteria":"- bats-core installed\n- tests/ directory structure created\n- Mock framework implemented\n- Helper functions available","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.061984-06:00","updated_at":"2025-11-19T20:50:46.283658-06:00","closed_at":"2025-11-19T20:50:46.283658-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-nim","type":"blocks","created_at":"2025-11-19T20:36:50.132295-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-pq3","type":"blocks","created_at":"2025-11-19T20:36:50.178562-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-rzw","type":"blocks","created_at":"2025-11-19T20:36:50.225654-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-pc3","type":"blocks","created_at":"2025-11-19T20:36:50.271326-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-dmt","type":"blocks","created_at":"2025-11-19T20:36:50.317159-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-z00","type":"blocks","created_at":"2025-11-19T20:36:50.363563-06:00","created_by":"daemon"},{"issue_id":"crystalmath-7jf","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.258432-06:00","created_by":"daemon"}]}
{"id":"crystalmath-a2j","content_hash":"da43585e7d89c86a5d9bc2a37b9dc52032ad84ee00cc6aecf101fcb4197825d0","title":"Implement lib/cry-exec.sh","description":"Calculation execution module. Function: exec_run(job_state_ref) constructs and executes crystal/mpirun command, handles gum spin wrapper, returns exit code","design":"From gemini: Read CRY_JOB array to build command. Execute in scratch directory. Wrap with gum spin if available. Return actual exit code for status reporting","acceptance_criteria":"- exec_run() builds correct commands\n- Serial mode uses crystalOMP\n- Parallel mode uses mpirun + PcrystalOMP\n- Exit code properly returned\n- gum spin integration works","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.919546-06:00","updated_at":"2025-11-19T20:56:48.771185-06:00","closed_at":"2025-11-19T20:56:48.771185-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-a2j","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:50.041441-06:00","created_by":"daemon"},{"issue_id":"crystalmath-a2j","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.548204-06:00","created_by":"daemon"},{"issue_id":"crystalmath-a2j","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.163205-06:00","created_by":"daemon"}]}
{"id":"crystalmath-awi","content_hash":"a3161af2716cf650f93ee67e9b0460a57ddd41cbec8a5f01a0733369b33b1c42","title":"Add Input File Preview","description":"Display selected job's input file in Input tab. Load .d12 file when job selected, add syntax highlighting for CRYSTAL input, and provide read-only view for completed jobs.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-20T19:20:28.769112-06:00","updated_at":"2025-11-20T19:20:28.769112-06:00","source_repo":".","labels":["mvp","phase-1","ui"]}
{"id":"crystalmath-be3","content_hash":"566f4a73d760fb2780c8344d6526c70ee6fefb34f1a21c49f3eb4e09baa8b8aa","title":"Implement lib/cry-ui.sh (visual components)","description":"Move visual functions from runcrystal:74-118. Includes ui_banner(), ui_card(), ui_status_line(), ui_file_found(), ui_spin(). Implements theme system","design":"From gemini: Functions use CRY_THEME associative array. From codex: Implement cry_ui_init() to handle gum bootstrap, set CRY_HAS_GUM flag, graceful degrade to plain text when gum missing. Theme registry pattern for cry-docs reuse","acceptance_criteria":"- All UI functions extracted from runcrystal\n- Theme system implemented with CRY_THEME_DEFAULT\n- Graceful fallback when gum missing\n- Module testable independently","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.777197-06:00","updated_at":"2025-11-19T20:57:16.162002-06:00","closed_at":"2025-11-19T20:57:16.162002-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-3cv","type":"blocks","created_at":"2025-11-19T20:36:49.693572-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-hyl","type":"blocks","created_at":"2025-11-19T20:36:49.737708-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-ib2","type":"blocks","created_at":"2025-11-19T20:36:49.784108-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-a2j","type":"blocks","created_at":"2025-11-19T20:36:49.831244-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-wwa","type":"blocks","created_at":"2025-11-19T20:36:49.853996-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:49.945857-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-pq3","type":"blocks","created_at":"2025-11-19T20:36:50.202927-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.454496-06:00","created_by":"daemon"},{"issue_id":"crystalmath-be3","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.05997-06:00","created_by":"daemon"}]}
{"id":"crystalmath-dmt","content_hash":"b2a25450d91f9a296a0a73e28dbf31759a6dbc440bd79dc277af8852868c6e10","title":"Write unit tests for lib/cry-stage.sh","description":"Test file staging, retrieval, missing file handling","acceptance_criteria":"- Test stage_inputs() copies files correctly\n- Test stage_retrieve_results()\n- Test missing file handling\n- Test explicit path usage\n- All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.253695-06:00","updated_at":"2025-11-20T00:40:41.589542-06:00","closed_at":"2025-11-20T00:40:41.589542-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-dmt","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.402954-06:00","created_by":"daemon"}]}
{"id":"crystalmath-ejy","content_hash":"8b7dfb8296b1bda32f2f5256b451415d5f13fbfd2d87b123fcd128f025d76a7c","title":"Implement module loader (cry_require)","description":"Create lib/core.sh with cry_require() function for safe module loading with error handling","design":"From codex: Check file exists before source, emit helpful errors for missing modules, return non-zero on failure. Allow main script to loop through module list","acceptance_criteria":"- cry_require() loads modules safely\n- Missing module errors are helpful\n- Returns appropriate exit codes\n- Works with module dependency order","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.740574-06:00","updated_at":"2025-11-19T20:52:31.893411-06:00","closed_at":"2025-11-19T20:52:31.893411-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-ejy","depends_on_id":"crystalmath-be3","type":"blocks","created_at":"2025-11-19T20:36:49.597902-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ejy","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:49.923232-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ejy","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.035547-06:00","created_by":"daemon"}]}
{"id":"crystalmath-g4p","content_hash":"c232439834370ab7ea6a96fcc07e351a0bbc65964a761c695551c21a7227d764","title":"Create tutorial module system from MASTER_TUTORIAL.md","description":"Split MASTER_TUTORIAL.md into separate tutorial files matching V2 help menu: usage.md, parallelism.md, intel_opts.md, scratch.md, troubleshooting.md. Install to share/tutorials/","design":"Extract sections from MASTER_TUTORIAL.md using SECTION markers. Create 5 markdown files in share/tutorials/. Update help_show_main() to use show_tutorial() function (like V2:94-108) that displays files with gum pager --soft-wrap.","acceptance_criteria":"- 5 tutorial files created\n- Matches V2 menu structure\n- Markdown formatting preserved\n- help_show_main updated\n- Tutorials display correctly","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T23:00:50.061432-06:00","updated_at":"2025-11-19T23:55:25.054325-06:00","closed_at":"2025-11-19T23:55:25.054325-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-g4p","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T23:00:56.832772-06:00","created_by":"daemon"}]}
{"id":"crystalmath-hai","content_hash":"edf1daff3b071515345c2c5d74179680f365ab2b44696f4b858fe36728d95926","title":"Enhance Job Status Display","description":"Improve job list table with better status indicators. Add color-coded status (green=completed, red=failed, yellow=running), progress indicators for running jobs, timestamps for created/started/completed, and sortable columns.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-20T19:20:27.245956-06:00","updated_at":"2025-11-20T19:20:27.245956-06:00","source_repo":".","labels":["mvp","phase-1","ui"]}
{"id":"crystalmath-hyl","content_hash":"2b76aa0f3e7f52585f3aa51c7c20e011617aee99aec73679a19d0477a41309cb","title":"Implement lib/cry-scratch.sh","description":"Scratch space lifecycle management. Functions: scratch_create(file_prefix) creates unique dir in SCRATCH_BASE, exports WORK_DIR. scratch_cleanup() removes scratch dir idempotently","design":"From gemini: Use trap 'scratch_cleanup' EXIT in main script. Safe to call cleanup even if creation failed. From codex: Return 70 for validation failures","acceptance_criteria":"- scratch_create() generates unique directories\n- WORK_DIR exported correctly\n- scratch_cleanup() is idempotent\n- Works with trap mechanism","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.849221-06:00","updated_at":"2025-11-19T20:55:33.203349-06:00","closed_at":"2025-11-19T20:55:33.203349-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-hyl","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:49.99272-06:00","created_by":"daemon"},{"issue_id":"crystalmath-hyl","depends_on_id":"crystalmath-pc3","type":"blocks","created_at":"2025-11-19T20:36:50.294435-06:00","created_by":"daemon"},{"issue_id":"crystalmath-hyl","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.501139-06:00","created_by":"daemon"},{"issue_id":"crystalmath-hyl","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.108019-06:00","created_by":"daemon"}]}
{"id":"crystalmath-ib2","content_hash":"4bff8f302ea1894090dd6d77a3d87ce200c6550ba5d999c2adf1afe39c7304e9","title":"Implement lib/cry-stage.sh","description":"File staging utilities. Functions: stage_inputs(file_prefix, work_dir, original_dir) copies input/aux files to scratch. stage_retrieve_results() copies outputs back","design":"From gemini: Move file mapping from lines 295-301, 361-367 to cry-config as associative arrays STAGE_MAP, RETRIEVE_MAP. Functions accept explicit dir arguments instead of relying on pwd","acceptance_criteria":"- stage_inputs() copies all required files\n- stage_retrieve_results() retrieves outputs\n- Uses explicit path arguments\n- Handles missing files gracefully","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.884651-06:00","updated_at":"2025-11-19T20:55:39.606558-06:00","closed_at":"2025-11-19T20:55:39.606558-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-ib2","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:50.017047-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ib2","depends_on_id":"crystalmath-dmt","type":"blocks","created_at":"2025-11-19T20:36:50.340079-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ib2","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.524587-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ib2","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.135967-06:00","created_by":"daemon"}]}
{"id":"crystalmath-ikl","content_hash":"0d6ab496c450fdc98a7c5a913c6d5e3e92873a47a3ab5e4940ea9d4f7206444b","title":"Create project directory structure","description":"Create bin/, lib/, tests/, docs/ directories. Set up initial .gitignore","acceptance_criteria":"- Directories created\n- .gitignore includes tmp_crystal/, .beads/ backup files\n- README.md updated with new structure","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.625726-06:00","updated_at":"2025-11-19T20:46:28.005003-06:00","closed_at":"2025-11-19T20:46:28.005003-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-ikl","depends_on_id":"crystalmath-6sp","type":"blocks","created_at":"2025-11-19T20:36:49.480865-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ikl","depends_on_id":"crystalmath-lcc","type":"blocks","created_at":"2025-11-19T20:36:49.506133-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ikl","depends_on_id":"crystalmath-ejy","type":"blocks","created_at":"2025-11-19T20:36:49.528672-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ikl","depends_on_id":"crystalmath-7jf","type":"blocks","created_at":"2025-11-19T20:36:50.109912-06:00","created_by":"daemon"},{"issue_id":"crystalmath-ikl","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:06.961671-06:00","created_by":"daemon"}]}
{"id":"crystalmath-jmt","content_hash":"9a29b6a21d1b828bdd7e2c9e626ba466318cc8e71551baa62dc512b4255771bb","title":"Integrate cry23.bashrc Environment","description":"Connect to existing CRYSTAL23 environment configuration. Source cry23.bashrc for environment variables, use CRY23_EXEDIR for executable path, respect CRY23_SCRDIR for scratch directory, handle missing environment gracefully.","status":"open","priority":0,"issue_type":"task","created_at":"2025-11-20T19:20:26.142779-06:00","updated_at":"2025-11-20T19:20:26.142779-06:00","source_repo":".","labels":["integration","mvp","phase-1"]}
{"id":"crystalmath-lcc","content_hash":"8878283f64154a28dcfdc6de9ff6821d3c039d4e816e85495b4b093e833e9b3b","title":"Implement lib/cry-logging.sh","description":"Logging infrastructure with cry_log(), cry_fatal(), cry_warn() functions. Structured output for debugging","design":"From codex: cry_fatal() returns exit code, doesn't call exit. cry_log levels: debug, info, warn, error. Support CRY_LOG_LEVEL env var","acceptance_criteria":"- cry_log() function works with levels\n- cry_fatal() returns non-zero\n- Log output includes timestamps\n- Respects log level filtering","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.702964-06:00","updated_at":"2025-11-19T20:50:22.965951-06:00","closed_at":"2025-11-19T20:50:22.965951-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-lcc","depends_on_id":"crystalmath-ejy","type":"blocks","created_at":"2025-11-19T20:36:49.574097-06:00","created_by":"daemon"},{"issue_id":"crystalmath-lcc","depends_on_id":"crystalmath-be3","type":"blocks","created_at":"2025-11-19T20:36:49.644519-06:00","created_by":"daemon"},{"issue_id":"crystalmath-lcc","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:49.900194-06:00","created_by":"daemon"},{"issue_id":"crystalmath-lcc","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.01077-06:00","created_by":"daemon"}]}
{"id":"crystalmath-nim","content_hash":"7efd67defbcdb3704f0ff0566cac7af96ba8a95374c77cd1a5168587a212e05a","title":"Write unit tests for lib/cry-config.sh","description":"Test configuration initialization, env var overrides, path construction, cry_config_get()","acceptance_criteria":"- Test cry_config_init() \n- Test env var override behavior\n- Test path variable exports\n- Test cry_config_get() helper\n- All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.098633-06:00","updated_at":"2025-11-20T00:40:36.148444-06:00","closed_at":"2025-11-20T00:40:36.148444-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-nim","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.284252-06:00","created_by":"daemon"}]}
{"id":"crystalmath-oxy","content_hash":"320dfffa682fcbf4918de653458ddad06ce818da501a013d663107294344d12a","title":"Refactor runcrystal into modular architecture","description":"Transform monolithic 372-line runcrystal script into production-grade modular CLI tool with separate lib/ modules, shared UI components, and comprehensive testing","design":"Architecture based on gemini/codex analysis: cry-config, cry-ui, cry-parallel, cry-scratch, cry-stage, cry-exec, cry-help modules. Main script becomes thin orchestrator \u003c100 lines. Use CRY_JOB associative array for state passing. Implement trap-based cleanup guarantee.","acceptance_criteria":"- All modules created and tested independently\n- Main runcrystal script \u003c100 lines\n- Zero functionality regression\n- Test coverage \u003e80%\n- Documentation complete\n- cry-docs can reuse UI components","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-19T20:35:09.537435-06:00","updated_at":"2025-11-20T00:40:56.402673-06:00","closed_at":"2025-11-20T00:40:56.402673-06:00","source_repo":"."}
{"id":"crystalmath-pc3","content_hash":"c0944449f9c267906d349a7e0735151f1e77f09ceb5bd112cd8da148cde1641f","title":"Write unit tests for lib/cry-scratch.sh","description":"Test scratch creation, cleanup, idempotency, trap integration","acceptance_criteria":"- Test scratch_create() unique dirs\n- Test scratch_cleanup() idempotent\n- Test cleanup on error conditions\n- Verify no orphaned directories\n- All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.218728-06:00","updated_at":"2025-11-20T00:40:41.58912-06:00","closed_at":"2025-11-20T00:40:41.58912-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-pc3","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.375628-06:00","created_by":"daemon"}]}
{"id":"crystalmath-pq3","content_hash":"2201a9d074a11fbe5d2556187e6cada57a0c945cf22711d00c873a008bc0621b","title":"Write unit tests for lib/cry-ui.sh","description":"Test UI functions with and without gum, theme system, graceful degradation","acceptance_criteria":"- Test ui_banner(), ui_card(), ui_status_line()\n- Test with HAS_GUM=true and false\n- Test theme system\n- Verify graceful degradation\n- All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.139819-06:00","updated_at":"2025-11-20T00:40:41.588066-06:00","closed_at":"2025-11-20T00:40:41.588066-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-pq3","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.308856-06:00","created_by":"daemon"}]}
{"id":"crystalmath-ps0","content_hash":"f0aa577902502e6beef1a7cbe48a162381a11be52a0600dab9902c15753c9126","title":"Create developer documentation (CONTRIBUTING.md)","description":"Document: how to add new modules, testing requirements, code style, module conventions","acceptance_criteria":"- CONTRIBUTING.md created\n- Module creation guide included\n- Testing requirements clear\n- Code style documented","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-19T20:36:19.434779-06:00","updated_at":"2025-11-19T21:09:36.094457-06:00","closed_at":"2025-11-19T21:09:36.094457-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-ps0","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.527853-06:00","created_by":"daemon"}]}
{"id":"crystalmath-qt1","content_hash":"d86d82eb32a564db22bbb5b88535e365fb5b50dfab7ec34b9e82216c9aa79033","title":"Implement New Job Modal Screen","description":"Create modal screen for job creation with input editor. Include TextArea widget for .d12 input content, Input field for job name, validation before job creation, and write input.d12 to work directory.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-11-20T19:20:24.783967-06:00","updated_at":"2025-11-20T19:20:24.783967-06:00","source_repo":".","labels":["mvp","phase-1","ui"]}
{"id":"crystalmath-rzw","content_hash":"4df1013b22e4957f19b4be3b7e27a62300cde8710114d7205736433b386e233f","title":"Write unit tests for lib/cry-parallel.sh","description":"Test resource calculation, env var exports, CRY_JOB array population","acceptance_criteria":"- Test serial mode (nprocs=0)\n- Test hybrid mode (various nprocs)\n- Test thread calculation\n- Test env var exports\n- All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.179675-06:00","updated_at":"2025-11-20T00:40:41.588656-06:00","closed_at":"2025-11-20T00:40:41.588656-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-rzw","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.336708-06:00","created_by":"daemon"}]}
{"id":"crystalmath-wil","content_hash":"0f2832bf76e52958d19fecb0263c9041389361d9b85955a7c31287d5a831cad2","title":"Implement automatic error analysis system","description":"Add intelligent failure analysis that scans output logs for common CRYSTAL23 errors (SCF divergence, memory issues) and provides student-friendly diagnostic hints and solutions.","design":"From V2/CrystalRun:280-308. Create analyze_failure() function in cry-exec.sh. Patterns: 'DIVERGENCE' → SCF hints, 'insufficient memory'/'SIGSEGV' → memory hints. Display with ui_warning and show last 20 lines of log. Call from exec_crystal_run on non-zero exit.","acceptance_criteria":"- Detects SCF divergence\n- Detects memory errors\n- Provides actionable hints\n- Shows log tail (20 lines)\n- Integrates with cry-exec","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-19T23:00:48.95185-06:00","updated_at":"2025-11-19T23:55:18.477878-06:00","closed_at":"2025-11-19T23:55:18.477878-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-wil","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T23:00:56.806109-06:00","created_by":"daemon"}]}
{"id":"crystalmath-wwa","content_hash":"f7824b0fbb8a73027c9e77281fdc86e2bca223a72fade241772b08db1ba4d0c5","title":"Implement lib/cry-help.sh","description":"Help system module. Function: help_show_main() displays interactive menu. Preserves existing help content from runcrystal:120-224","design":"Extract help system to module. Keep gum choose and gum pager logic. Prepare integration point for cry-docs (line 214-219 logic)","acceptance_criteria":"- help_show_main() displays menu\n- All help topics preserved\n- gum integration works\n- Placeholder for cry-docs integration ready","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-19T20:36:18.953841-06:00","updated_at":"2025-11-19T20:55:19.451921-06:00","closed_at":"2025-11-19T20:55:19.451921-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-wwa","depends_on_id":"crystalmath-6vn","type":"blocks","created_at":"2025-11-19T20:36:50.063318-06:00","created_by":"daemon"},{"issue_id":"crystalmath-wwa","depends_on_id":"crystalmath-7e1","type":"blocks","created_at":"2025-11-19T20:36:50.571175-06:00","created_by":"daemon"},{"issue_id":"crystalmath-wwa","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.188014-06:00","created_by":"daemon"}]}
{"id":"crystalmath-x7l","content_hash":"47738ede073dd14d1712e2730414ed15c164fad83c50e06cb13d94d41e759a04","title":"Create Results Summary View","description":"Parse and display structured results in Results tab. Show final energy display, geometry information, key calculation parameters, and error messages if failed.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-20T19:20:30.439808-06:00","updated_at":"2025-11-20T19:20:30.439808-06:00","source_repo":".","labels":["mvp","phase-1","results"]}
{"id":"crystalmath-xjk","content_hash":"408f9550a3b42845ac701f7a0161e108cbbd0920df4a78a6a2d477be9750bb26","title":"Complete Core Job Runner","description":"Implement real CRYSTAL job execution with CRYSTALpytools integration. Replace mock subprocess with actual crystalOMP execution. Parse output files for energy and results. Detect errors and convergence. Store structured results in database.","status":"in_progress","priority":0,"issue_type":"feature","created_at":"2025-11-20T19:20:23.494592-06:00","updated_at":"2025-11-20T21:36:35.173314-06:00","source_repo":".","labels":["core","mvp","phase-1"]}
{"id":"crystalmath-z00","content_hash":"1041775f674bd153fc1e8068747be59c54c474f3fc129fa7649af4e293b81dcc","title":"Write integration tests","description":"End-to-end workflow tests with mocked CRYSTAL23 binaries","design":"From codex: Set CRY_FAKE_BIN=true, create fake crystalOMP/PcrystalOMP that exit 0, verify full workflow: parse args → setup → stage → exec → retrieve → cleanup","acceptance_criteria":"- Smoke test with serial mode\n- Smoke test with parallel mode\n- Test failure handling\n- Test scratch cleanup on error\n- All integration tests pass","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-19T20:36:19.288627-06:00","updated_at":"2025-11-19T20:36:19.288627-06:00","source_repo":".","dependencies":[{"issue_id":"crystalmath-z00","depends_on_id":"crystalmath-oxy","type":"parent-child","created_at":"2025-11-19T20:37:07.427689-06:00","created_by":"daemon"}]}
